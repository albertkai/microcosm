)]}'
{"version":3,"file":"/client/views/johari/johari.coffee.js","sources":["johari.coffee"],"names":[],"mappings":"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","sourcesContent":["Template.johariAside.rendered = ->\n  $cont = $(@.find('.johari-start'))\n  $cont.addClass '_visible'\n  setTimeout ->\n    $cont.find('h3').addClass '_visible'\n  , 100\n  setTimeout ->\n    $cont.find('h4').addClass '_visible'\n  , 1200\n  setTimeout ->\n    $cont.find('.circle').first().addClass '_visible'\n  , 4000\n  setTimeout ->\n    $cont.find('.circle').first().next().addClass '_visible'\n  , 8000\n  setTimeout ->\n    $cont.find('button').addClass '_visible'\n  , 12000\n  log 'johari intro initialized'\n#  $cont = $('.johari-aside').find('.johari-start')\n#  $cont.find('*').removeClass '_visible'\n#  setTimeout ->\n#    $cont.removeClass '_visible'\n#    UI.insert UI.render(Template.johariAsideContent), $('.johari-insert').get(0)\n#    setTimeout ->\n#      $cont = $('#johari-container')\n#      $cont.removeClass('flip').addClass '_ready'\n#    , 400\n#  , 1000\n\n\n\nTemplate.johari.events {\n\n  'click #submit-johari': (e)->\n    e.preventDefault()\n\n    if $('.trait._selected').length is 5\n\n      results = {}\n      $(e.currentTarget).siblings('.traits').find('.trait').each ->\n        alias = $(this).data('value')\n        log alias\n        log $(this).hasClass('_selected')\n        if $(this).hasClass('_selected')\n          results[alias] = 1\n        else\n          results[alias] = 0\n\n      log 'Results of initializing johari test, passing results to Johari::init:'\n      log results\n\n      Johari.init Meteor.user(), results, ->\n        $cont = $('#johari-container')\n        $cont.removeClass('flip').addClass '_ready'\n\n    else if $('.trait._selected').length < 5\n\n      MainCtrl.notify 'Упсики!:(', 'Вы должны выбрать ровно 5 определений личности!', 'error'\n\n    else if $('.trait._selected').length > 5\n\n      MainCtrl.notify 'Пиздец!:)', 'Зачем ты занимаешься бредом?))', 'error'\n\n  'click #registration-finish': (e)->\n\n    e.preventDefault()\n    #    Johary.johariInit()\n    $('#johari-container').removeClass('_ready')\n    $('.background').removeClass '_visible'\n    Meteor.users.update Meteor.user()._id, {$set: {'profile.registration.status': 'tested'}}\n    username = Meteor.user().profile.username\n    setTimeout ->\n      window.location.href = '/'\n    , 400\n    log 'Registration passed!'\n\n}\n\nTemplate.johariAside.events {\n  'click #johari-go': ->\n    $cont = $('.johari-aside').find('.johari-start')\n    $cont.find('*').removeClass '_visible'\n    setTimeout ->\n      $cont.removeClass '_visible'\n      UI.insert UI.render(Template.johariAsideContent), $('.johari-insert').get(0)\n    , 1000\n}\n\nTemplate.johariAsideContent.events {\n\n  'click #submit-johari': (e)->\n\n    e.preventDefault()\n\n    if $('.trait._selected').length is 5\n\n      $('#johari-container').removeClass('flip').addClass('_ready')\n      id = $('#userId').val()\n      results = {}\n      $('.trait').each ->\n        alias = $(this).data('value')\n        if $(this).hasClass '_selected'\n          results[alias] = 1\n        else\n          results[alias] = 0\n\n      Johari.add id, results\n\n    else if $('.trait._selected').length < 5\n\n      MainCtrl.notify 'Упсики!:(', 'Вы должны выбрать ровно 5 определений личности!', 'error'\n\n    else if $('.trait._selected').length > 5\n\n      MainCtrl.notify 'Пиздец!:)', 'Зачем ты занимаешься бредом?))', 'error'\n\n}\n\n\nTemplate.johariTraits.rendered = ->\n\n  setTimeout =>\n    $('.flip-cont-wrap').addClass 'flip'\n  , 200\n\n  gender = 'male'\n  translated = []\n  markup = ''\n  for lang of Meteor.i18nMessages.johari[gender]\n    translated.push {\n      text: __('johari.' + gender + '.' + lang)\n      alias: lang\n    }\n  counter = 0\n  targetCol = $(@.find('.column')).first()\n  translated.forEach (trait)->\n    traitMarkup = '<p class=\"trait\" data-value=\"' + trait.alias + '\"><span>' + trait.text + '</span></p>'\n    if counter < 11\n      targetCol.append traitMarkup\n      counter++\n    else\n      log 'alter'\n      counter = 1\n      targetCol = targetCol.next()\n      targetCol.append traitMarkup\n\n\n\nTemplate.johariTraits.events {\n\n  'click .trait': (e)->\n\n    if !$(e.currentTarget).hasClass('_selected')\n\n      if $('.trait._selected').length < 5\n        $(e.currentTarget).addClass '_selected'\n      else\n        MainCtrl.notify 'Вы пытаетесь выбрать больше 5 пунктов', 'Можете убрать выделение с другой черты, если считаете, что эта подходит больше', 'error'\n\n    else\n\n      $(e.currentTarget).removeClass('_selected')\n\n  'click #submit-johari': (e)->\n\n    e.preventDefault()\n\n    #    if $('.trait._selected').length is 5\n    #\n    #      MainCtrl.notify 'Отлично!', 'Тест пройден!', 'success'\n    #      $('#johari-container').removeClass('flip').addClass('_ready')\n    #\n    #    else if $('.trait._selected').length < 5\n    #\n    #      MainCtrl.notify 'Упсики!:(', 'Вы должны выбрать ровно 5 определений личности!', 'error'\n    #\n    #    else if $('.trait._selected').length > 5\n    #\n    #      MainCtrl.notify 'Пиздец!:)', 'Зачем ты занимаешься бредом?))', 'error'\n    results = {}\n    $('.trait').each ->\n      alias = $(this).data('value')\n      if $(this).hasClass '_selected'\n        results[alias] = 1\n      else\n        results[alias] = 0\n\n    Johari.init Meteor.user(), results\n\n}"]}